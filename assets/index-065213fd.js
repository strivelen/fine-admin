import{r as y,j as i,aD as w,ad as te,ao as g,aq as ne,av as N,O as z,Q as b,ab as ae,aE as O,aF as le,ae as ie,aG as oe,am as ce}from"./vendor-0e720bfc.js";import{b as ue,I as x}from"./index-cf763c2c.js";import{u as se,a as de,b as fe,c as A}from"./index-d62a84b9.js";import{g as V}from"./domTarget-a50ce1e5.js";import{d as U,u as he}from"./useRequest-645097aa.js";import{P as B}from"./index-53ad0c6f.js";import{P}from"./index-35224c64.js";import"./throttle-fe19b4d4.js";import"./index-45d4ede2.js";import"./AntdIcon-76890c80.js";import"./index-ac8d7459.js";import"./index-f8dcf536.js";import"./relativeTime-5abd1bf9.js";var ge=function(t){var e=function(n,r,o){var u=y.useRef(!1),d=y.useRef([]),a=y.useRef([]),s=y.useRef();t(function(){var f,T=Array.isArray(o)?o:[o],m=T.map(function(E){return V(E)});if(!u.current){u.current=!0,d.current=m,a.current=r,s.current=n();return}(m.length!==d.current.length||!U(m,d.current)||!U(r,a.current))&&((f=s.current)===null||f===void 0||f.call(s),d.current=m,a.current=r,s.current=n())}),se(function(){var f;(f=s.current)===null||f===void 0||f.call(s),u.current=!1})};return e};const ve=ge;var me=ve(y.useEffect);const ye=me;function be(c,t,e){e===void 0&&(e={});var l=de(t);ye(function(){var n=V(e.target,window);if(n!=null&&n.addEventListener){var r=function(u){return l.current(u)};return n.addEventListener(c,r,{capture:e.capture,once:e.once,passive:e.passive}),function(){n.removeEventListener(c,r,{capture:e.capture})}}},[c,e.capture,e.once,e.passive],e.target)}var pe=function(t){return t===document||t===document.body?Math.max(window.pageYOffset,document.documentElement.scrollTop,document.body.scrollTop):t.scrollTop},Te=function(t){return t.scrollHeight||Math.max(document.documentElement.scrollHeight,document.body.scrollHeight)},Me=function(t){return t.clientHeight||Math.max(document.documentElement.clientHeight,document.body.clientHeight)},L=globalThis&&globalThis.__assign||function(){return L=Object.assign||function(c){for(var t,e=1,l=arguments.length;e<l;e++){t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(c[n]=t[n])}return c},L.apply(this,arguments)},_e=globalThis&&globalThis.__awaiter||function(c,t,e,l){function n(r){return r instanceof e?r:new e(function(o){o(r)})}return new(e||(e=Promise))(function(r,o){function u(s){try{a(l.next(s))}catch(f){o(f)}}function d(s){try{a(l.throw(s))}catch(f){o(f)}}function a(s){s.done?r(s.value):n(s.value).then(u,d)}a((l=l.apply(c,t||[])).next())})},we=globalThis&&globalThis.__generator||function(c,t){var e={label:0,sent:function(){if(r[0]&1)throw r[1];return r[1]},trys:[],ops:[]},l,n,r,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(a){return function(s){return d([a,s])}}function d(a){if(l)throw new TypeError("Generator is already executing.");for(;e;)try{if(l=1,n&&(r=a[0]&2?n.return:a[0]?n.throw||((r=n.return)&&r.call(n),0):n.next)&&!(r=r.call(n,a[1])).done)return r;switch(n=0,r&&(a=[a[0]&2,r.value]),a[0]){case 0:case 1:r=a;break;case 4:return e.label++,{value:a[1],done:!1};case 5:e.label++,n=a[1],a=[0];continue;case 7:a=e.ops.pop(),e.trys.pop();continue;default:if(r=e.trys,!(r=r.length>0&&r[r.length-1])&&(a[0]===6||a[0]===2)){e=0;continue}if(a[0]===3&&(!r||a[1]>r[0]&&a[1]<r[3])){e.label=a[1];break}if(a[0]===6&&e.label<r[1]){e.label=r[1],r=a;break}if(r&&e.label<r[2]){e.label=r[2],e.ops.push(a);break}r[2]&&e.ops.pop(),e.trys.pop();continue}a=t.call(c,e)}catch(s){a=[6,s],n=0}finally{l=r=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},_=globalThis&&globalThis.__read||function(c,t){var e=typeof Symbol=="function"&&c[Symbol.iterator];if(!e)return c;var l=e.call(c),n,r=[],o;try{for(;(t===void 0||t-- >0)&&!(n=l.next()).done;)r.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(e=l.return)&&e.call(l)}finally{if(o)throw o.error}}return r},W=globalThis&&globalThis.__spreadArray||function(c,t,e){if(e||arguments.length===2)for(var l=0,n=t.length,r;l<n;l++)(r||!(l in t))&&(r||(r=Array.prototype.slice.call(t,0,l)),r[l]=t[l]);return c.concat(r||Array.prototype.slice.call(t))},Ee=function(t,e){e===void 0&&(e={});var l=e.target,n=e.isNoMore,r=e.threshold,o=r===void 0?100:r,u=e.reloadDeps,d=u===void 0?[]:u,a=e.manual,s=e.onBefore,f=e.onSuccess,T=e.onError,m=e.onFinally,E=_(y.useState(),2),M=E[0],H=E[1],Y=_(y.useState(!1),2),k=Y[0],R=Y[1],F=y.useMemo(function(){return n?n(M):!1},[M]),S=he(function(v){return _e(void 0,void 0,void 0,function(){var h;return we(this,function(p){switch(p.label){case 0:return[4,t(v)];case 1:return h=p.sent(),H(v?L(L({},h),{list:W(W([],_(v.list),!1),_(h.list),!1)}):h),[2,h]}})})},{manual:a,onFinally:function(h,p,D){R(!1),m==null||m(p,D)},onBefore:function(){return s==null?void 0:s()},onSuccess:function(h){setTimeout(function(){q()}),f==null||f(h)},onError:function(h){return T==null?void 0:T(h)}}),$=S.loading,I=S.run,C=S.runAsync,Z=S.cancel,G=function(){F||(R(!0),I(M))},J=function(){return F?Promise.reject():(R(!0),C(M))},X=function(){return I()},ee=function(){return C()},q=function(){var h=V(l);if(h){var p=pe(h),D=Te(h),re=Me(h);D-p<=re+o&&G()}};return be("scroll",function(){$||k||q()},{target:l}),fe(function(){I()},W([],_(d),!1)),{data:M,loading:!k&&$,loadingMore:k,noMore:F,loadMore:A(G),loadMoreAsync:A(J),reload:A(X),reloadAsync:A(ee),mutate:H,cancel:Z}};const Se=Ee,{CheckableTag:K}=w;function Ae({disabled:c,label:t,value:e,isSelected:l=!1,onClick:n}){return c?l?i(K,{checked:l,children:t},e):i(w,{style:{border:"none",paddingInline:8},children:t},e):i(K,{checked:l,onChange:()=>n==null?void 0:n(e,{label:t,value:e}),children:t},e)}function xe({disabled:c,items:t=[],value:e=[],onChange:l,renderItem:n,size:r="small"}){const o=u=>{if(c)return;let d=e;e.includes(u)?d=e.filter(s=>s!==u):d=[...e,u];const a=t.filter(s=>d.includes(s.value));l==null||l(d,a)};return i(te,{size:r,wrap:!0,children:t.map((u,d)=>n&&typeof n=="function"?n({disabled:c,isSelected:e.indexOf(u.value)>-1,label:u.label,value:u.value,onClick:()=>o(u.value)}):i(Ae,{disabled:c,isSelected:e.includes(u.value),label:u.label,value:u.value,onClick:o},d))})}const{Text:Le}=oe,{useToken:He}=ae,Q=4;function Ce(){const[c]=B.useForm(),{token:t}=He(),{data:e,loading:l,loadMore:n,loadingMore:r,reload:o}=Se(async d=>{const a=d?Math.ceil(d.list.length/Q)+1:1,s=c.getFieldsValue();return{list:await ue({PageSize:Q,PageNumber:a,...s}),total:20}}),u=e&&e.list.length<e.total;return g(ne,{children:[i(N,{bordered:!1,children:g(B,{disabled:l,submitter:!1,form:c,layout:"horizontal",initialValues:{types:["2","3","4","12","13"],owner:["2","3"]},onValuesChange:o,children:[i(B.Item,{name:"types",label:"所有类型",children:i(xe,{disabled:l,items:[{label:"类型一",value:"1"},{label:"类型二",value:"2"},{label:"类型三",value:"3"},{label:"类型四",value:"4"},{label:"类型五",value:"5"},{label:"类型六",value:"6"},{label:"类型七",value:"7"},{label:"类型八",value:"8"},{label:"类型九",value:"9"},{label:"类型十",value:"10"},{label:"类型十一",value:"11"},{label:"类型十二",value:"12"},{label:"类型十三",value:"13"},{label:"类型十四",value:"14"},{label:"类型十五",value:"15"}]})}),g(z,{gutter:20,align:"middle",style:{marginBottom:t.controlHeightSM},children:[i(b,{children:i(P,{label:"owner",name:"owner",mode:"multiple",formItemProps:{style:{minWidth:"10rem",marginBottom:0}},options:[{label:"我自己",value:"1"},{label:"吴家豪",value:"2"},{label:"周星星",value:"3"},{label:"赵丽颖",value:"4"},{label:"姚明",value:"5"},{label:"张三",value:"6"},{label:"李四",value:"7"}]})}),i(b,{children:i("a",{onClick:()=>{c.setFieldsValue({owner:["1"]})},children:"只看自己的"})})]}),g(z,{gutter:20,style:{marginBottom:`-${t.controlHeightSM}px`},children:[i(b,{children:i(P,{placeholder:"不限",label:"活跃用户",name:"activeuser",options:[{label:"张三",value:"zhangsan"}]})}),i(b,{children:i(P,{placeholder:"不限",label:"好评度",name:"praise",options:[{label:"优秀",value:"ok"}]})})]})]})}),i(N,{bordered:!1,style:{marginTop:16},children:i(ke,{data:e==null?void 0:e.list,loading:l,loadMore:n,loadingMore:r,hasMore:u})})]})}const j=({type:c,text:t})=>{switch(c){case"star-o":return g("span",{children:[i(x,{type:"StarOutlined",style:{marginRight:8}}),t]});case"like-o":return g("span",{children:[i(x,{type:"LikeOutlined",style:{marginRight:8}}),t]});case"message":return g("span",{children:[i(x,{type:"MessageOutlined",style:{marginRight:8}}),t]});default:return null}};function ke({loading:c,data:t=[],loadMore:e,loadingMore:l,hasMore:n}){return i(O,{size:"large",loading:c,rowKey:"id",itemLayout:"vertical",loadMore:n?i("div",{style:{textAlign:"center",marginTop:16},children:i(ce,{onClick:e,style:{paddingLeft:48,paddingRight:48},children:l?g("span",{children:[i(x,{type:"LoadingOutlined"})," 加载中..."]}):"加载更多"})}):i("span",{children:"No more data"}),dataSource:t,renderItem:o=>g(O.Item,{actions:[i(j,{type:"star-o",text:o.star},"star"),i(j,{type:"like-o",text:o.like},"like"),i(j,{type:"message",text:o.message},"message")],extra:i("div",{style:{width:272,height:1}}),children:[i(O.Item.Meta,{title:i("a",{href:o.href,children:o.title}),description:g("span",{children:[i(w,{children:"Ant Design"}),i(w,{children:"设计语言"}),i(w,{children:"蚂蚁金服"})]})}),i(Le,{children:o.content}),g(z,{gutter:20,style:{paddingTop:"16px"},children:[g(b,{children:[i(le,{src:o.avatar,size:"small"}),i("a",{href:o.href,style:{paddingLeft:10},children:o.owner})]}),g(b,{children:["发布在 ",i("a",{href:o.href,children:o.href})]}),i(b,{children:i("em",{children:ie(o.updatedAt).format("YYYY-MM-DD HH:mm")})})]})]},o.id)})}export{Ce as default};
